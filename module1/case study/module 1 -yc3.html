<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>case study</title>
</head>
<body>
</body>
<script>
        let check=false;
        let name = prompt('Tên');
        name=name.trim().toLowerCase();
        let tempName=""
        for(let i=0;i<name.length;i++){
            if (name.charAt(i)===" " && name.charAt(i+1)===" "){
                continue;
            }
            if (i===0 || name.charAt(i-1)===" "){
                tempName+=name.charAt(i).toUpperCase();
                continue;
            }
            tempName+=name.charAt(i);
        }
        name=tempName;
        let ID;
        do{
            ID = prompt('CMND');
            if(!isNaN(ID)){
                ID= Number.parseFloat(ID);
            }
            if (!Number.isInteger(ID)){
                alert('số bạn nhập không đúng');
                continue;
            }
            if (ID<10000000||ID>99999999){
                alert('số bạn nhập không đúng');
                continue;
            }
            check=true;
        }while (!check)
        check=false;
        let birthday;
        do{
            birthday = prompt('Ngày tháng năm sinh');
            if (birthday.charAt(2)==='/'&&birthday.charAt(5)==='/'){
                let day= birthday.substring(0,2);
                let month = birthday.substring(3,5);
                let year = birthday.substring(6,10);
                if (!isNaN(day)&&!isNaN(month)&&!isNaN(year)){
                    day= Number.parseFloat(day);
                    month= Number.parseFloat(month);
                    year= Number.parseFloat(year);
                    if (Number.isInteger(day)&&Number.isInteger(month)&&Number.isInteger(year)){
                        if (day<32 && month<13 && year>1900){
                            check=true;
                        }
                    }
                }

            }
            if (!check){
                alert('ngày sinh không đúng định dạng');
            }
        }while (!check)
        check=false
        let mail;
        do{
            let countAt=0
            let countDoc=0
            mail = prompt('Email');
            for (let i=0;i<mail.length;i++){
                if (mail.charAt(i)==='@'){
                    countAt++;
                    for (let j=i+1;j<mail.length;j++){
                        if (mail.charAt(j)==='.'){
                            countDoc++;
                        }
                    }
                }

            }
            if (countAt!=1||countDoc<1){
                alert('email bạn nhập không đúng')
            }else {
                check=true;
            }

        }while (!check)
        check=false;
        let address = prompt('địa chỉ');
        address=address.trim().toLowerCase();
        let tempAddress="";
        for(let i=0;i<address.length;i++){
            if (address.charAt(i)===" " && address.charAt(i+1)===" "){
                continue;
            }
            if (i===0 ){
                tempAddress=+address.charAt(i).toUpperCase();
                continue;
            }
            tempAddress+=address.charAt(i);
        }
        address=tempAddress;
        let money1=(address=='đà nẵng')?20 : (address=='huế')?10 : (address=='quảng nam')?5 : 0;
        let CustomerType = prompt('Loại thẻ (Diamon, Platinum, Gold, Silver, Member');
        CustomerType=CustomerType.trim().toLowerCase();
        let tempCustomerType="";
        for (let i=0;i<CustomerType.length;i++){
            if(i===0){
                tempCustomerType+=CustomerType.charAt(i).toUpperCase();
                continue;
            }
            tempCustomerType+=CustomerType.charAt(i);
        }
        CustomerType=tempCustomerType;
        let money2=(CustomerType=='Diamon')?15 :(CustomerType=='Platium')?10:(CustomerType=='Gold')?5:(CustomerType=='Silver')?2:0;
        let discount = prompt('Giảm giá') ;
        let person;
        do{
            person = prompt('Số lượng đi kèm');
            if (!isNaN(person)){
                person= Number.parseFloat(person);
                if (Number.isInteger(person) && person>0){
                    check=true;
                }
            }if (!check){
                alert('số bạn nhập không phải là số nguyên dương')
            }
        }while (!check)
        check=false;
        let rentDay;
        do{
            rentDay = prompt('Số ngày thuê') ;
            if (!isNaN(rentDay)){
                rentDay= Number.parseFloat(rentDay);
                if (Number.isInteger(rentDay) && rentDay>0){
                   check=true;
                }
            }if (!check){
                alert('số bạn nhập không phải là số nguyên dương')
            }
        }while (!check)
        check=false;
        let serviceType = prompt('Loại dịch vụ (Villa, House, Room)');
        let money = (serviceType == 'villa') ? 500 : (serviceType == 'house') ? 300 : (serviceType == 'room') ? 100 : 0;
        let rentType = prompt('Loại phòng thuê (Vip, Business, Normal)');
        let tolal= rentDay*money*(1-discount/100);
        alert(tolal);
        let D;
        let A;
        if (rentDay > 7){
             D=tolal-30;
        }else if (rentDay >=5){
            D=tolal-20;
        }else if (rentDay>=2 && rentDay<5){
            D=tolal-10
        }
        let currenYear= new Date().getFullYear();
        let birth = new Date(birthday).getFullYear();
        let age= currenYear-birth;
        if (age>=30 && address=='đà nẵng'){
            A=D-2
        }else if (age>=20 && address=='đà nẵng'){
            A=D-1
        }
        alert(A);

        let choose=prompt('1.Hiển thị thông tin khách hàng'+'\n'+
                          '2.Chỉnh sửa thông tin khách hàng'+'\n'+
                          '3.Hiển thị giá sau khi được giảm giá');
        switch (choose) {
            case '1':
                alert('Tên: '+name+'\n'+
                       'CMND: '+ID+'\n'+
                       'Ngày tháng năm sinh: '+birthday+'\n'+
                       'Email: '+mail+'\n'+
                       'Địa chỉ: '+address+'\n'+
                       'Loại thẻ: '+CustomerType+'\n'+
                       'Số lượng đi kèm: '+person+'\n'+
                       'Số ngày thuê: '+rentDay+'\n'+
                       'Loại dịch vụ: '+serviceType+'\n'+
                       'Loại phòng thuê: '+rentType+'\n'
                );
                break;
            case '2':
                let fix=prompt('1.Tên: '+name+'\n'+
                    '2.CMND: '+ID+'\n'+
                    '3.Ngày tháng năm sinh: '+birthday+'\n'+
                    '4.Email: '+mail+'\n'+
                    '5.Địa chỉ: '+address+'\n'+
                    '6.Loại thẻ: '+CustomerType+'\n'+
                    '7.Số lượng đi kèm: '+person+'\n'+
                    '8.Số ngày thuê: '+rentDay+'\n'+
                    '9.Loại dịch vụ: '+serviceType+'\n'+
                    '10.Loại phòng thuê: '+rentType+'\n'
                );
                switch(fix){
                    case '1':
                        name=prompt('Nhập Tên: ');
                        break;
                    case '2':
                        ID=prompt('Nhập CMND: ');
                        break;
                    case '3':
                        birthday=prompt('Nhập ID: ');
                        break;
                    case '4':
                        mail=prompt('Nhập Email: ');
                        break;
                    case '5':
                        address=prompt('Nhập Địa chỉ: ');
                        break;
                    case '6':
                        CustomerType=prompt('Nhập Loại thẻ: ');
                        break;
                    case '7':
                        person=prompt('Nhập Số lượng đi kèm: ');
                        break;
                    case '8':
                        rentDay=prompt('Nhập Số ngày thuê: ');
                        break;
                    case '9':
                        serviceType=prompt('Nhập Loai dịch vụ: ');
                        break;
                    case '10':
                        rentType=prompt('Nhập Loại phòng thuê: ');
                        break;
                    default:
                        alert('false');
                }   alert('Tên: '+name+'\n'+
                'CMND: '+ID+'\n'+
                'Ngày tháng năm sinh: '+birthday+'\n'+
                'Email: '+mail+'\n'+
                'Địa chỉ: '+address+'\n'+
                'Loại thẻ: '+CustomerType+'\n'+
                'Số lượng đi kèm: '+person+'\n'+
                'Số ngày thuê: '+rentDay+'\n'+
                'Loại dịch vụ: '+serviceType+'\n'+
                'Loại phòng thuê: '+rentType+'\n')
            case'3':
                let total1= A-money1-money2;
                alert('Tổng số tiền: '+total1);


        }







</script>
</html>